---
sip: 1000
title: AggregateData Metadata Standard
status: Draft
author: KICN-FT(@ktcnft)
created: 2024-04-04
---


## Simple Summary
複数トランザクションの集約されるデータ構成のメタ情報。

## Abstract
フルオンチェーンNFTの作成時など、1つのトランザクションでは格納できないサイズのデータを記録する方法として、データを分割してアグリゲートトランザクションなどを使用して記録するのが一般的であるが、その分割形式やデータの性質に関する情報の規格を提案します。

## Motivation

Symbolにはすでに様々なフルオンチェーンのデータエンコード・デコード手法が存在しています。
それぞれに特徴やメリットが存在して分散性が生かされた状態ではありますが、このままでは将来的に混乱する可能性も無視できません。
そのため、アクセスしようとしているフルオンチェーンがどのような形式で保存されているのかを的確に知ることのできるメタデータを提案します。


## Specification

### sample

```json
{
  "type": "kicnft",
  "id": "TA6EAATQMNJM4QV4ARM3DVWGSZULWBDB7HGEVPY",
  "signer": "336C560436DECA88F596C0791323F6BEE47BD09B966BF02505FF28EFDAC5BDEB",
  "transactionType": 16724,
  "mimeType": "image/jpeg",
  "messageType": 0,
  "encodeType": "hex",
  "dataSize": 98765,
  "chuncSize": 1023,
  "headerStructure":{
    "type":"count",
    "structure":{
      "init":15,
      "base":1,
      "break":100
    }
  }
}

```

メタ情報の保存場所について指定しません。データの先頭に付与しても、オフチェーンで保存しても可能です。



### type
データ記録方式を指定します。
- 例
  - nftdrive
  - metal
  - comsa
  - kicnft

### id
データの所在を一意に特定できるID値を指定します。
例えば
NFTDriveの場合はデータアドレスを指定します。
metal on symbol の場合はmetalIdを指定します。

### signer
データの作成アカウント公開鍵を指定します。
アカウントの送信履歴からデータを取り出す場合に使用します。

### transactionType
メッセージを記録するときに使用するトランザクションタイプを指定します。

- transfer
  - 16724
- metadata
  - 16708
  - 16964
  - 17220

### mimeType
メディアタイプを指定します。ブラウザで表示する場合などに参照します。

### messageType
メッセージの格納方法を指定します。
転送トランザクションで記録する場合、最初の1バイトの使用用途の特定に使用します。

- 0: plainメッセージとして保存
- 1: 暗号化メッセージとして保存
- -1: RawData(1024バイトすべてをメッセージとして使用する)

### encodeType
データ記録時の格納方式について補足事項があれば指定します。

hexhex: 16進数化した文字列をさらに16進数化した場合に指定します（旧sdk対応）

### dataSize
実データのサイズをバイト数で指定します。

### chuncSize
1トランザクションあたりに指定するデータのうち、実データ断片のサイズをバイト数で指定します。


### headerStructure
ヘッダ構成について記述します。
100件ごとに、最初の1件にヘッダ用トランザクションを15件用意する場合は以下のように指定します。

```
{
  type:count,
  structure:{
    init:15,
    base:1,
    break:100
  }
}
```

トランザクションに記録されるデータのうち、すべてのトランザクションに12バイトのヘッダ情報が含まれる場合は以下のように記述します。

```
{
  type:byte,
  structure:{
    base:1
  }
}
```

## Copyright

Copyright and related rights waived via CC0.
